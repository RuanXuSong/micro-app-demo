(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[396],{34950:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"}},3855:function(e,t,n){"use strict";var r=n(95318),i=n(20862);t.Z=void 0;var a=i(n(67294)),s=r(n(34950)),o=r(n(92074)),u=function(e,t){return a.createElement(o.default,Object.assign({},e,{ref:t,icon:s.default}))};u.displayName="ExclamationCircleOutlined";var l=a.forwardRef(u);t.Z=l},77123:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var r=n(97857),i=n.n(r),a=n(19632),s=n.n(a),o=n(5574),u=n.n(o),l=n(13769),c=n.n(l),d=n(67294),f=n(9308),h=n(27601),m=n(96486),p=n(14955),v="disabled___mlAxB",g=n(85893),y=["value","onChange","disabled","rowKey","dataSource"],$=function(e){var t=e.value,n=void 0===t?[]:t,r=e.onChange,a=e.disabled,o=e.rowKey,l=e.dataSource,$=c()(e,y),b=(0,d.useRef)([]),x=(0,d.useRef)([]),S=(0,d.useState)(!0),Z=u()(S,2),w=Z[0],M=Z[1],D={selectedRowKeys:n,onChange:function(e,t){var n;if(!a){var i=s()(e),u=function(e,t){for(var n={add:[],del:[]},r={},i=0;i<e.length;i++)r[e[i]]=e[i];for(var a=0;a<t.length;a++)(0,h.Z)(r[t[a]])?n.add.push(t[a]):delete r[t[a]];for(var s in r)n.del.push(r[s]);return n}(b.current,e),c=u.add,d=void 0===c?[]:c,f=u.del,v=void 0===f?[]:f,g=t.filter((function(e){return d.includes(e[o])})),y=x.current.filter((function(e){return v.includes(e[o])}));!function e(t){for(var n=0;n<t.length;n++){var r=(t[n]||{}).children;i.push(t[n][o]),(0,m.isEmpty)(r)||e(r)}}(g);!function e(t){for(var n=function(n){var r=(t[n]||{}).children;i=i.filter((function(e){return e!==t[n][o]})),(0,m.isEmpty)(r)||e(r)},r=0;r<t.length;r++)n(r)}(y);var $=s()(new Set(i));null==r||r($),b.current=s()($);var S=s()(l||[]);x.current=null!==(n=(0,p.oO)(S).filter((function(e){return $.includes(e[o])})))&&void 0!==n?n:[]}}};return(0,d.useEffect)((function(){if(w&&!(0,m.isEmpty)(n)){var e,t;b.current=n;var r=s()(l||[]);x.current=null!==(e=null===(t=(0,p.oO)(r))||void 0===t?void 0:t.filter((function(e){return n.includes(e[o])})))&&void 0!==e?e:[],M(!1)}}),[n]),(0,g.jsx)(f.ZP,i()({className:a?v:{},rowSelection:i()(i()({},D),{},{checkStrictly:!0,selections:!1}),rowKey:o,dataSource:l},$))}},61253:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return le}});var r=n(74348),i=n(12461),a=n(71577),s=n(9308),o=n(43758),u=n(24969),l=n(14955),c=n(62571),d=n(13769),f=n.n(d),h=n(97857),m=n.n(h),p=n(5574),v=n.n(p),g=n(67294),y=n(66490),$=n(13448),b=n(11382),x=n(11486),S=n(45845),Z=n(34041),w=n(27601),M=n(86317),D=n(59360),I=n(67723),j=n(82198),C=n(32615),O=n(3855),_="formWrap___il6fy",T="rowWrap___azZzl",k="description___m7c7r",P=n(75873),A=n(94184),F=n.n(A),H=n(30381),R=n.n(H),z=n(41712),B=n(84354),E=function(e){return e&&e<R()().endOf("day")},L=n(27484),Y=n.n(L),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?Y()(e).format(t):null},W=n(85893),q=["logo","validBefore"],Q={labelCol:{span:8},wrapperCol:{span:14}},V={labelCol:{span:4},wrapperCol:{span:19}},U=function(e){var t=e.visible,n=e.toggleVisible,a=e.formData,s=e.reload,u=y.Z.useForm(),c=v()(u,1)[0],d=(0,D.Z)(),h=d.tip,p=d.setTip,A=a.id,H=(0,B.useModel)("company").reloadCompanyData,L=(0,M.QT)(API.platform.sysOrg.detail.fetch,{onSuccess:function(e){c.setFieldsValue(m()(m()({},e),{},{validBefore:e.validBefore?R()(e.validBefore):null,logo:null!=e&&e.logo?[{uid:"1",name:"logo",status:"done",url:null==e?void 0:e.logo,size:0}]:[]}))},manual:!0}),Y=L.run,U=L.loading;(0,g.useEffect)((function(){return t&&A&&Y({id:A}),function(){c.resetFields()}}),[A,t]);var K=function(){c.resetFields(),n(),null==s||s(),H()},J=(0,M.QT)(API.platform.sysOrg.update.fetch,{onSuccess:function(){K(),i.ZP.success("保存成功")},manual:!0}),G=J.run,X=J.loading,ee=(0,M.QT)(API.platform.sysOrg.save.fetch,{onSuccess:function(e){K(),e&&$.Z.success({message:"租户新建成功",description:"密码为: ".concat(e),duration:null})},manual:!0}),te=ee.run,ne=ee.loading,re=(0,M.QT)((function(e){e.logo;var t=e.validBefore,n=f()(e,q);p("数据保存中，请稍候...");var r=(0,z.HO)(m()(m()(m()({},a),n),{},{logo:e.logo.map((function(e){return e.url||e.response.data.url}))[0],validBefore:N(t)}));return A?G(r):te(r)}),{manual:!0}),ie=re.run,ae=re.loading,se=U||ae||X||ne;return(0,W.jsx)(r.Z,{centered:!0,visible:t,forceRender:!0,maskClosable:!1,title:"".concat((0,w.Z)(A)?"新建":"编辑","企业"),okButtonProps:{htmlType:"submit"},width:800,onOk:function(){return c.submit()},onCancel:function(){n(),c.resetFields()},confirmLoading:se,children:(0,W.jsx)(b.Z,{spinning:se,tip:h,children:(0,W.jsxs)(y.Z,m()(m()({form:c,onFinish:ie},Q),{},{className:_,children:[(0,W.jsx)(y.Z.Item,{label:"企业编码",name:"orgCode",tooltip:{icon:(0,W.jsx)(O.Z,{}),title:"企业编码将作为企业下所有账号后缀\n需要输入20位以内小写英文字母"},rules:[{whitespace:!0},{required:!0},{validator:P.T0}],children:(0,W.jsx)(x.Z,{disabled:!!A,placeholder:"请输入"})}),(0,W.jsx)(y.Z.Item,{label:"企业名称",name:"orgName",rules:[{whitespace:!0},{required:!0}],children:(0,W.jsx)(x.Z,{placeholder:"请输入"})}),(0,W.jsx)("div",{className:T,children:(0,W.jsx)(I.Z,{formItemProps:Q,label:"企业logo",name:"logo",maxCount:1,accept:j.b1["图片"].join(","),uploadProps:{listType:"picture-card"},required:!0,requiredMessage:"请上传企业 logo",children:(0,W.jsx)(C.Z,{})})}),(0,W.jsx)("div",{className:T,children:(0,W.jsx)(y.Z.Item,{label:"企业代码",name:"enterpriseCode",rules:[{whitespace:!0}],children:(0,W.jsx)(x.Z,{placeholder:"请输入"})})}),(0,W.jsx)(y.Z.Item,{label:"负责人",name:"director",rules:[{whitespace:!0},{required:!0}],children:(0,W.jsx)(x.Z,{placeholder:"请输入"})}),(0,W.jsx)(y.Z.Item,{label:"负责人手机号",name:"phone",rules:[{whitespace:!0},{required:!0},{validator:P.tH}],children:(0,W.jsx)(x.Z,{placeholder:"请输入"})}),!!A&&(0,W.jsx)(y.Z.Item,{label:"管理员账号",name:"directorUsername",rules:[{whitespace:!0}],children:(0,W.jsx)(x.Z,{disabled:!0,placeholder:"请输入"})}),(0,W.jsx)(y.Z.Item,{label:"有效期",name:"validBefore",rules:[{required:!0}],children:(0,W.jsx)(S.Z,{disabledDate:E})}),!!A&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(y.Z.Item,{label:"状态",name:"status",rules:[{required:!0}],children:(0,W.jsx)(Z.Z,{options:(0,l.MM)(o.w6),placeholder:"请选择"})}),(0,W.jsx)(y.Z.Item,{label:"当前用户数",name:"userNum",children:(0,W.jsx)(x.Z,{disabled:!0,placeholder:"请输入"})})]}),(0,W.jsx)("div",{className:F()(T,k),children:(0,W.jsx)(y.Z.Item,m()(m()({label:"描述",name:"description",rules:[{whitespace:!0},{required:!0}]},V),{},{children:(0,W.jsx)(x.Z,{placeholder:"请输入"})}))})]}))})})},K=n(79697),J="formWrap___k9c3a",G=n(96486),X=n(77123),ee=n(62865),te=["resourceIds"],ne={labelCol:{span:6},wrapperCol:{span:16}},re=function(e){var t=e.visible,n=e.toggleVisible,a=e.formData,s=e.loading,u=e.reload,l=y.Z.useForm(),c=v()(l,1)[0],d=(0,D.Z)(),h=d.tip,p=d.setTip,$=a.id,x=a.directorRoleId,S=a.orgCode,Z=(0,M.QT)(API.platform.sysUser.myResourceList.fetch,{manual:!0}),w=Z.run,I=Z.data,j=Z.loading;(0,g.useEffect)((function(){t&&S&&w({orgCode:S})}),[t,S]);var C=(0,g.useMemo)((function(){return(0,ee.r)(I)}),[I]),O=(0,M.QT)((function(e){return API.platform.sysOrg.resourceList.fetch({id:e})}),{manual:!0,onSuccess:function(e){var t=[];!function e(n){n.forEach((function(n){var r=n.id,i=n.privilegeList,a=void 0===i?[]:i,s=n.children;t.push(r),(0,K.Z)(a)||a.forEach((function(e){t.push(e.id)})),(0,K.Z)(s)||e(s)}))}(e),c.setFieldsValue({resourceIds:t})}}),_=O.run;(0,g.useEffect)((function(){t&&_($)}),[t]),(0,g.useEffect)((function(){return(0,K.Z)(a)||c.setFieldsValue(a),function(){c.resetFields()}}),[a]);var T=(0,M.QT)((function(e){var t=e.resourceIds,n=void 0===t?[]:t,r=f()(e,te);p("数据保存中，请稍候...");var i=(0,z.HO)(m()(m()({},r),{},{clientKey:o.OW.clientId,id:x,resourceIds:n.filter((function(e){return(0,G.isNumber)(e)}))}));return API.platform.sysRole.resourceSave.fetch(i)}),{manual:!0,onSuccess:function(){i.ZP.success("保存成功"),c.resetFields(),n(),null==u||u()}}),k=T.run,P=T.loading;return(0,W.jsx)(r.Z,{centered:!0,visible:t,forceRender:!0,maskClosable:!1,title:"企业授权",okButtonProps:{htmlType:"submit"},width:800,onOk:function(){return c.submit()},onCancel:function(){n(),c.resetFields()},confirmLoading:P,children:(0,W.jsx)(b.Z,{spinning:j||s&&P,tip:h,children:(0,W.jsx)(y.Z,m()(m()({form:c,onFinish:k},ne),{},{className:J,children:(0,W.jsx)(y.Z.Item,{label:"权限列表",name:"resourceIds",noStyle:!0,children:(0,W.jsx)(X.Z,{search:!1,rowKey:"id",columns:[{title:"资源名称",dataIndex:"description",align:"left",copyable:!1,valueType:"text"}],dataSource:C})})}))})})},ie=n(15009),ae=n.n(ie),se=n(99289),oe=n.n(se),ue=n(60106),le=function(){var e=function(){var e=(0,g.useRef)(),t=(0,ue.x)({visible:!1,formData:{},loading:!1}),n=v()(t,2),r=n[0],a=n[1],s=(0,ue.x)({visible:!1,formData:{},loading:!1}),u=v()(s,2),l=u[0],c=u[1],d=(e.current||{}).reload,f=(0,M.QT)(API.platform.sysOrg.resetPassword.fetch,{manual:!0,onSuccess:function(e){i.ZP.success("重置成功"),null==d||d(),e&&$.Z.success({message:"密码重置成功",description:"密码为: ".concat(e),duration:null})}}).run,h=(0,M.QT)(API.platform.sysOrg.updateStatus.fetch,{manual:!0,onSuccess:function(){i.ZP.success("操作成功"),null==d||d()}}).run,p=(0,M.QT)(API.authorization.resourceRole.resourceDelete.fetch,{manual:!0,onSuccess:function(){i.ZP.success("删除成功"),null==d||d()}}).run,y=function(){var e=oe()(ae()().mark((function e(t){var n,r,i,a;return ae()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,API.platform.sysOrg.pageList.fetch((0,z.HO)(m()(m()({},t),{},{page:(null==t?void 0:t.current)||o.ii.page,pageSize:(null==t?void 0:t.pageSize)||o.ii.pageSize})));case 2:return n=e.sent,r=n.list,i=n.page,a=n.total,e.abrupt("return",{data:r||[],page:i,success:!0,total:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{actionRef:e,reload:d,editModalConfig:r,setEditModalConfig:a,authModalConfig:l,setAuthModalConfig:c,handleDelete:p,fetchList:y,handleCompanyEdit:function(e){a((function(t){t.visible=!0,t.loading=!0,t.formData=e}))},handleUpdateStatus:h,handleResetPassword:f,handleCompanyAdd:function(){a((function(e){e.visible=!0,e.formData={}}))},handleAuthorize:function(e){c((function(t){t.visible=!0,t.loading=!0,t.formData=e}))},handleModalHide:function(e){({edit:a,auth:c})[e]((function(e){e.visible=!1,e.loading=!1,e.formData={}}))}}}(),t=e.actionRef,n=e.reload,d=e.editModalConfig,f=e.fetchList,h=e.handleResetPassword,p=e.handleUpdateStatus,y=e.handleCompanyAdd,b=e.handleCompanyEdit,x=e.handleModalHide,S=e.authModalConfig,Z=e.handleAuthorize,w=[{title:"企业编码",dataIndex:"orgCode",align:"left",copyable:!1,valueType:"text",hideInSearch:!1},{title:"企业名称",dataIndex:"orgName",align:"left",copyable:!1,valueType:"text",hideInSearch:!1},{title:"负责人",dataIndex:"director",align:"left",copyable:!1,valueType:"text",hideInSearch:!1},{title:"负责人手机号",dataIndex:"phone",align:"left",copyable:!1,valueType:"text",hideInSearch:!1},{title:"状态",dataIndex:"status",align:"left",copyable:!1,valueType:"text",hideInSearch:!1,valueEnum:(0,l.BJ)(o.w6)},{title:"有效期",dataIndex:"validBefore",align:"left",copyable:!1,valueType:"date",hideInSearch:!1,hideInTable:!0},{title:"有效期",dataIndex:"validBefore",align:"left",copyable:!1,valueType:"date",hideInSearch:!0},{title:"操作",dataIndex:"id",align:"left",copyable:!1,valueType:"text",hideInSearch:!0,render:function(e,t){return(0,W.jsx)(c.Z,{buttons:[{name:"编辑",key:"edit",onClick:function(){return b(t)}},{name:"授权",key:"authorize",onClick:function(){return Z(t)}},{name:"禁用",key:"disable",onClick:function(){return r.Z.confirm({title:"确认禁用？",onOk:function(){return t.id&&p({status:o.w6["禁用"],id:"".concat(t.id)})}})},hidden:o.w6["禁用"]===+t.status},{name:"启用",key:"enable",onClick:function(){t.validBefore?null!=E&&E(R()(t.validBefore))?(i.ZP.warning("企业有效期已过期，请先重新编辑"),b(t)):t.id&&p({status:o.w6["正常"],id:"".concat(null==t?void 0:t.id)}):i.ZP.error("企业有效期缺失，无法启用")},hidden:o.w6["禁用"]!==+t.status},{name:"重置密码",key:"reset",onClick:function(){return r.Z.confirm({title:"确认重置密码？",onOk:function(){return t.id&&h({id:"".concat(t.id)})}})}}]})}}];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(s.ZP,{style:{padding:"18px 22px"},actionRef:t,request:f,onRequestError:function(e){console.error(e.message),i.ZP.error("数据加载失败,".concat(e.message))},columns:w,bordered:!0,rowKey:"id",pagination:{size:"default"},dateFormatter:"string",headerTitle:"企业列表",tableAlertRender:!1,toolBarRender:function(){return[(0,W.jsxs)(a.Z,{onClick:y,type:"primary",children:[(0,W.jsx)(u.Z,{}),"新建"]},"add")]}}),(0,W.jsx)(U,{visible:d.visible,formData:d.formData,toggleVisible:function(){return x("edit")},reload:n}),(0,W.jsx)(re,{visible:S.visible,formData:S.formData,loading:S.loading,toggleVisible:function(){return x("auth")},reload:n})]})}},27484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",s="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,l),a=n-i<0,s=t.clone().add(r+(a?-1:1),l);return+(-(r+(n-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:u,d:o,D:f,h:s,m:a,s:i,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},$="en",b={};b[$]=v;var x=function(e){return e instanceof M},S=function e(t,n,r){var i;if(!t)return $;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;b[o]=t,i=o}return!r&&i&&($=i),i||!r&&$},Z=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},w=y;w.l=S,w.i=x,w.w=function(e,t){return Z(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(m);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return w},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=Z(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return Z(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<Z(e)},g.$g=function(e,t,n){return w.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!w.u(t)||t,c=w.p(e),h=function(e,t){var i=w.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(o)},m=function(e,t){return w.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(c){case d:return r?h(1,0):h(31,11);case l:return r?h(1,v):h(0,v+1);case u:var $=this.$locale().weekStart||0,b=(p<$?p+7:p)-$;return h(r?g-b:g+(6-b),v);case o:case f:return m(y+"Hours",0);case s:return m(y+"Minutes",1);case a:return m(y+"Seconds",2);case i:return m(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,u=w.p(e),c="set"+(this.$u?"UTC":""),h=(n={},n[o]=c+"Date",n[f]=c+"Date",n[l]=c+"Month",n[d]=c+"FullYear",n[s]=c+"Hours",n[a]=c+"Minutes",n[i]=c+"Seconds",n[r]=c+"Milliseconds",n)[u],m=u===o?this.$D+(t-this.$W):t;if(u===l||u===d){var p=this.clone().set(f,1);p.$d[h](m),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[w.p(e)]()},g.add=function(r,c){var f,h=this;r=Number(r);var m=w.p(c),p=function(e){var t=Z(h);return w.w(t.date(t.date()+Math.round(e*r)),h)};if(m===l)return this.set(l,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===o)return p(1);if(m===u)return p(7);var v=(f={},f[a]=t,f[s]=n,f[i]=e,f)[m]||1,g=this.$d.getTime()+r*v;return w.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),a=this.$H,s=this.$m,o=this.$M,u=n.weekdays,l=n.months,c=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},d=function(e){return w.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:w.s(o+1,2,"0"),MMM:c(n.monthsShort,o,l,3),MMMM:c(l,o),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,u,2),ddd:c(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:w.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,s,!0),A:f(a,s,!1),m:String(s),mm:w.s(s,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(e,t){return t||m[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,f,h){var m,p=w.p(f),v=Z(r),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,$=w.m(this,v);return $=(m={},m[d]=$/12,m[l]=$,m[c]=$/3,m[u]=(y-g)/6048e5,m[o]=(y-g)/864e5,m[s]=y/n,m[a]=y/t,m[i]=y/e,m)[p]||y,h?$:w.a($)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return w.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),D=M.prototype;return Z.prototype=D,[["$ms",r],["$s",i],["$m",a],["$H",s],["$W",o],["$M",l],["$y",d],["$D",f]].forEach((function(e){D[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),Z.extend=function(e,t){return e.$i||(e(t,M,Z),e.$i=!0),Z},Z.locale=S,Z.isDayjs=x,Z.unix=function(e){return Z(1e3*e)},Z.en=b[$],Z.Ls=b,Z.p={},Z}()}}]);