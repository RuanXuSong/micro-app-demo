
server {
    listen       80;

    access_log  /var/log/nginx/access.log;

    location / {
        root /usr/share/nginx/html/;
        index index.php index.html index.htm;
        # add_header Cache-Control;
        add_header Access-Control-Allow-Origin *;
        if ( $request_uri ~* ^.+.(js|css|jpg|png|gif|tif|dpg|jpeg|eot|svg|ttf|woff|json|mp4|rmvb|rm|wmv|avi|3gp)$ ){
            add_header Cache-Control max-age=7776000;
            add_header Access-Control-Allow-Origin *;
        }
        try_files $uri $uri/ /index.html;
    }

    # Web服务API 代理
    location /_AMapService/ {
        set $args "$args&jscode=c58a6cd05a02388acbdcaa9ce792159a";
        proxy_pass https://restapi.amap.com/;
    }

    # redirect server error pages to the static page /50x.html
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}